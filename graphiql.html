<!DOCTYPE html>
<html>
<head>
   <title>GraphiQL</title>
   <link rel="shortcut icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ2p0T-r4pTdjFEnObJS8xSM9FHJPTLbqA8Ew&usqp=CAU" type="image/x-icon">
   <link rel="stylesheet" href="https://unpkg.com/graphiql/graphiql.min.css">
</head>
<body style="width: 100%; height: 100%; margin: 0; overflow: hidden;">
   <div id="graphiql" style="height: 100vh;">Loading...</div>
   <script crossorigin src="https://unpkg.com/react/umd/react.production.min.js"></script>
   <script crossorigin src="https://unpkg.com/react-dom/umd/react-dom.production.min.js"></script>
   <script crossorigin src="https://unpkg.com/graphiql/graphiql.min.js"></script>
   <script>
    const url = 'https://learn.zone01dakar.sn/api/graphql-engine/v1/graphql'; 

    let token = localStorage.getItem("jwtToken")
    
    const graphQLFetcher = (graphQLParams) => {
      return fetch(url, {
        method: 'post',
        headers: { 'Content-Type': 'application/json' ,
                    'Authorization': `Bearer ${token}` ,
                    },
        body: JSON.stringify(graphQLParams),
      }).then((response) => response.json());
    };
 
    ReactDOM.render(
        React.createElement(GraphiQL, {fetcher: graphQLFetcher}),
        document.getElementById('graphiql')
    );
 </script>
</body>
</html>